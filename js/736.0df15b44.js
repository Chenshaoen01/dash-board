"use strict";(self["webpackChunkdash_board2"]=self["webpackChunkdash_board2"]||[]).push([[736],{8736:function(o,a,t){t.r(a),t.d(a,{default:function(){return J}});var e=t(3396),n=t(7139);const s={class:"container mt-5 mb-5"},l={class:"table border"},i=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",{scope:"col"},"到期日"),(0,e._)("th",{scope:"col"},"優惠券名稱"),(0,e._)("th",{scope:"col"},"是否啟用"),(0,e._)("th",{scope:"col"},"編輯")])],-1),d={key:0,class:"text-primary"},p={key:1,class:"text-muted"},c={class:"btn-group"},u=["onClick"],r=["onClick"];function h(o,a,t,h,m,b){const _=(0,e.up)("loading"),C=(0,e.up)("pageButton"),g=(0,e.up)("CouponModal"),f=(0,e.up)("Toast");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(_,{active:m.isLoading,"onUpdate:active":a[0]||(a[0]=o=>m.isLoading=o)},null,8,["active"]),(0,e._)("div",s,[(0,e._)("button",{type:"button",class:"btn btn-primary mb-3 d-flex ms-auto",onClick:a[1]||(a[1]=o=>b.openModal(!0))},"新增優惠券"),(0,e._)("table",l,[i,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(m.coupons,(o=>((0,e.wg)(),(0,e.iD)("tr",{key:o.id},[(0,e._)("td",null,(0,n.zw)(o.due_date),1),(0,e._)("td",null,(0,n.zw)(o.title),1),(0,e._)("td",null,[o.is_enabled?((0,e.wg)(),(0,e.iD)("span",d,"已啟用")):((0,e.wg)(),(0,e.iD)("span",p,"未啟用"))]),(0,e._)("td",null,[(0,e._)("div",c,[(0,e._)("button",{type:"button",class:"btn btn-outline-primary",onClick:a=>b.openModal(!1,o)},"編輯",8,u),(0,e._)("button",{type:"button",class:"btn btn-outline-danger",onClick:a=>b.deleteCoupon(o.id)},"刪除",8,r)])])])))),128))])]),(0,e.Wm)(C,{paginationReceived:m.pagination,onChangePage:b.getCoupon},null,8,["paginationReceived","onChangePage"]),(0,e.Wm)(g,{couponDataReceived:m.tempCoupon,onUpDateCoupon:b.upDateCoupon,ref:"CouponModal"},null,8,["couponDataReceived","onUpDateCoupon"]),(0,e.Wm)(f,{ref:"toast",class:"position-absolute top-0 end-0"},null,512)])],64)}var m=t(9242);const b={id:"CouponModal",class:"modal modal-lg",tabindex:"-1"},_={class:"modal-dialog"},C={class:"modal-content"},g=(0,e._)("div",{class:"modal-header bg-dark"},[(0,e._)("h5",{class:"modal-title text-white"},"Modal title"),(0,e._)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},v={class:"row row-cols-lg-2 row-cols-1"},w={class:"col"},D={class:"form-label w-100"},y={class:"col"},k={class:"form-label w-100"},x={class:"col"},M={class:"form-label w-100"},U={class:"mx-2"},R={class:"col"},$=(0,e._)("label",{class:"form-label w-100"}," 是否啟用 ",-1),L={class:"form-check"},N=(0,e._)("label",{class:"form-check-label",for:"flexRadioDefault1"}," 是 ",-1),V={class:"form-check"},H=(0,e._)("label",{class:"form-check-label",for:"flexRadioDefault2"}," 否 ",-1),T={class:"col"},S={class:"form-label w-100"},W={class:"modal-footer"},Z=(0,e._)("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"取消",-1);function z(o,a,t,s,l,i){return(0,e.wg)(),(0,e.iD)("div",b,[(0,e._)("div",_,[(0,e._)("div",C,[g,(0,e._)("div",f,[(0,e._)("div",v,[(0,e._)("div",w,[(0,e._)("label",D,[(0,e.Uk)(" 優惠券名稱 "),(0,e.wy)((0,e._)("input",{class:"form-control",type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>l.CouponData.title=o)},null,512),[[m.nr,l.CouponData.title]])])]),(0,e._)("div",y,[(0,e._)("label",k,[(0,e.Uk)(" 到期日 "),(0,e.wy)((0,e._)("input",{class:"form-control",type:"number","onUpdate:modelValue":a[1]||(a[1]=o=>l.CouponData.due_date=o)},null,512),[[m.nr,l.CouponData.due_date]])])]),(0,e._)("div",x,[(0,e._)("label",M,[(0,e.Uk)(" 折扣比例: "),(0,e._)("span",U,(0,n.zw)(l.CouponData.percent)+"%",1),(0,e.wy)((0,e._)("input",{class:"d-block w-100 mt-3",type:"range",step:"5","onUpdate:modelValue":a[2]||(a[2]=o=>l.CouponData.percent=o),min:"0",max:"100"},null,512),[[m.nr,l.CouponData.percent]])])]),(0,e._)("div",R,[$,(0,e._)("div",L,[(0,e.wy)((0,e._)("input",{class:"form-check-input",type:"radio",name:"activeOrNot",id:"flexRadioDefault1",value:"1","onUpdate:modelValue":a[3]||(a[3]=o=>l.CouponData.is_enabled=o),checked:""},null,512),[[m.G2,l.CouponData.is_enabled]]),N]),(0,e._)("div",V,[(0,e.wy)((0,e._)("input",{class:"form-check-input",type:"radio",name:"activeOrNot",id:"flexRadioDefault2",value:"0","onUpdate:modelValue":a[4]||(a[4]=o=>l.CouponData.is_enabled=o)},null,512),[[m.G2,l.CouponData.is_enabled]]),H])]),(0,e._)("div",T,[(0,e._)("label",S,[(0,e.Uk)(" 測試代碼 "),(0,e.wy)((0,e._)("input",{class:"form-control",type:"text","onUpdate:modelValue":a[5]||(a[5]=o=>l.CouponData.code=o)},null,512),[[m.nr,l.CouponData.code]])])])])]),(0,e._)("div",W,[Z,(0,e._)("button",{type:"button",class:"btn btn-primary",onClick:a[6]||(a[6]=a=>o.$emit("upDateCoupon",l.CouponData))},"確認")])])])])}var B=t(7972),I=t.n(B),G={data(){return{CouponModal:{},CouponData:{}}},props:["couponDataReceived"],watch:{couponDataReceived(){this.CouponData=this.couponDataReceived,void 0===this.CouponData.percent&&(this.CouponData.percent=50)}},methods:{modalShow(){this.modal.show()},modalHide(){this.modal.hide()}},mounted(){const o=new(I())(document.getElementById("CouponModal"));this.modal=o}},O=t(89);const P=(0,O.Z)(G,[["render",z]]);var Y=P,E=t(5513),K=t.n(E),j=t(4138),q=t(2327),A={data(){return{coupons:[],tempCoupon:{},pagination:{},isLoading:!1}},components:{pageButton:j.Z,Loading:K(),CouponModal:Y,Toast:q.Z},methods:{getCoupon(o=1){this.isLoading=!0;const a=`https://vue3-course-api.hexschool.io/api/chenshaoen/admin/coupons?page=${o}`;this.axios.get(a).then((o=>{this.isLoading=!1,this.coupons=o.data.coupons,this.pagination=o.data.pagination}))},deleteCoupon(o){const a=`https://vue3-course-api.hexschool.io/api/chenshaoen/admin/coupon/${o}`;this.axios.delete(a).then((o=>{this.getCoupon()}))},openModal(o,a){o?(this.isNew=o,this.tempCoupon={},this.$refs.CouponModal.modalShow()):!1===o&&(this.isNew=o,this.tempCoupon=a,this.$refs.CouponModal.modalShow())},openToast(o,a){console.log(o,a),this.$refs.toast.toastShow(o,a)},upDateCoupon(o){if(o.percent=parseInt(o.percent),void 0===o.is_enabled?o.is_enabled=1:o.is_enabled=parseInt(o.is_enabled),this.isNew){this.$refs.CouponModal.modalHide();const a={data:o},t="https://vue3-course-api.hexschool.io/api/chenshaoen/admin/coupon";this.axios.post(t,a).then((o=>{this.openToast(o.data.success,o.data.message),this.getCoupon()}))}else if(!this.isNew){this.$refs.CouponModal.modalHide();const a={data:o},t=`https://vue3-course-api.hexschool.io/api/chenshaoen/admin/coupon/${this.tempCoupon.id}`;this.axios.put(t,a).then((o=>{this.openToast(o.data.success,o.data.message),this.getCoupon()}))}}},created(){this.getCoupon()}};const F=(0,O.Z)(A,[["render",h]]);var J=F}}]);
//# sourceMappingURL=736.0df15b44.js.map